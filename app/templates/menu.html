<div id="main_menu" class="menu">
  <div class="menu_item"  onClick="location.href='/'"          >Home</div>
  <div class="menu_item"  onClick="animateLeft('#main_menu'); animateLeft('#about_menu');"          ><div class="next_arrow">&nbsp;</div><span>About          </span></div>
  <div class="menu_item"  onClick="animateLeft('#main_menu'); animateLeft('#nomenclature_menu');"   ><div class="next_arrow">&nbsp;</div><span>Nomenclature   </span></div>
  <div class="menu_item"  onClick="animateLeft('#main_menu'); animateLeft('#documentation_menu');"  ><div class="next_arrow">&nbsp;</div><span>Documentation  </span></div>
  <div class="menu_item"  onClick="animateLeft('#main_menu'); animateLeft('#images_and_data_menu');"><div class="next_arrow">&nbsp;</div><span>Images and GIS Data</span></div>
  <div class="menu_item"  onClick="location.href='/AdvancedSearch';">    <a href="/AdvancedSearch">     Advanced Search   </a></div>
  <div class="menu_item"  onClick="location.href='/FeatureNameRequest';"><a href="/FeatureNameRequest"> Name Request Form </a></div>
</div>


<div id="about_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#about_menu'); animateRight('#main_menu');"> Previous</div>
  <div class="parent_menu">About</div>
  <div class="sub_menu"> 
    <div class="menu_item" onClick="location.href='/Page/Introduction';"     ><a href="/Page/Introduction"     >Introduction                            </a></div>
    <div class="menu_item" onClick="location.href='/Page/History';"          ><a href="/Page/History"          >History &amp; References                </a></div>
    <div class="menu_item" onClick="location.href='/Page/Approved';"         ><a href="/Page/Approved"         >How Names are Approved                  </a></div>
    <div class="menu_item" onClick="location.href='/Page/Members';"          ><a href="/Page/Members"          >IAU Working Group and Task Group Members</a></div>                                                                                          
    <div class="menu_item" onClick="location.href='/Page/FAQ';"              ><a href="/Page/FAQ"              >FAQ                                     </a></div>
    <div class="menu_item" onClick="location.href='/Page/Acknowledgements';" ><a href="/Page/Acknowledgements" >Acknowledgements                        </a></div>
    <div class="menu_item" onClick="location.href='/Page/Related_Resources';"><a href="/Page/Related_Resources">Related Resources                       </a></div>
    <div class="menu_item" onClick="location.href='/Page/Contact_Us';"       ><a href="/Page/Contact_Us"       >Contact Us                              </a></div>
  </div>
</div>                        

<div id="nomenclature_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#nomenclature_menu'); animateRight('#main_menu');"> Previous</div>
  <div class="parent_menu">Nomenclature</div>
  <div class="sub_menu">
    <div class="menu_item" onClick="location.href='/Page/MERCURY/target';"><a href="/Page/MERCURY/target">Mercury   </a></div>
    <div class="menu_item" onClick="location.href='/Page/VENUS/target';"  ><a href="/Page/VENUS/target">  Venus     </a></div>
    <div class="menu_item" onClick="location.href='/Page/MOON/target';"   ><a href="/Page/MOON/target">   The Moon  </a></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#mars_menu');"      ><div class="next_arrow"> </div><span>Mars     </span></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#asteroids_menu');" ><div class="next_arrow"> </div><span>Asteroids</span></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#jupiter_menu');"   ><div class="next_arrow"> </div><span>Jupiter  </span></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#saturn_menu');"    ><div class="next_arrow"> </div><span>Saturn   </span></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#uranus_menu');"    ><div class="next_arrow"> </div><span>Uranus   </span></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#neptune_menu');"   ><div class="next_arrow"> </div><span>Neptune  </span></div>
    <div class="menu_item" onClick="animateLeft('#nomenclature_menu'); animateLeft('#dwarf_menu');"     ><div class="next_arrow"> </div><span>Dwarf Planets  </span></div>
    <div class="menu_item" onClick="location.href='/Page/Rings';"        ><a href="/Page/Rings"  >Ring and Ring Gap Nomenclature                     </a></div>
    <div class="menu_item" onClick="location.href='/Page/Planets';"      ><a href="/Page/Planets">Planet and Satellite Names, Discoverers, and Themes</a></div>
  </div>
</div>

<div id="documentation_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  
  <div class="previous_menu" onClick="animateRight('#documentation_menu'); animateRight('#main_menu');"> Previous</div>
  <div class="parent_menu">Documentation</div>
  <div class="sub_menu"> 
    <div class="menu_item" onClick="location.href='/Page/Rules';"       ><a href="/Page/Rules"       >IAU Rules                  </a></div>
    <div class="menu_item" onClick="location.href='/Page/Specifics';"   ><a href="/Page/Specifics"   >Specifics of the Gazetteer </a></div>
    <div class="menu_item" onClick="location.href='/Abbreviations';"    ><a href="/Abbreviations"    >Abbreviations              </a></div>
    <div class="menu_item" onClick="location.href='/References';"       ><a href="/References"       >Sources of Planetary Names </a></div>
    <div class="menu_item" onClick="location.href='/Page/Categories';"  ><a href="/Page/Categories"  >Surface Feature Categories </a></div>
    <div class="menu_item" onClick="location.href='/DescriptorTerms';"  ><a href="/DescriptorTerms"  >Descriptor Terms           </a></div>
    <div class="menu_item" onClick="location.href='/TargetCoordinates';"><a href="/TargetCoordinates">Target Coordinate Systems  </a></div>
    <div class="menu_item" onClick="location.href='/Page/Website';"     ><a href="/Page/Website"     >Help using the Website     </a></div>
    <div class="menu_item" onClick="location.href='https://astrodocs.wr.usgs.gov/index.php/Webservices';" title="Geospatial Information System - Applicaion Programming Interface">
      <a title="Geospatial Information System - Applicaion Programming Interface" href="https://astrodocs.wr.usgs.gov/index.php/Webservices"   target="_new" >GIS API</a>
    </div>
  </div>
</div>

<div id="images_and_data_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#images_and_data_menu'); animateRight('#main_menu');"> Previous</div>
  <div class="parent_menu">Images &amp; GIS Data</div>
  <div class="sub_menu"> 
    <div class="menu_item" onClick="location.href='/Page/Images';"    ><a href="/Page/Images"   > Images showing named features </a></div>
    <div class="menu_item" onClick="location.href='/GIS_Downloads';"  ><a href="/GIS_Downloads" > GIS Downloads                 </a></div>
    <div class="sub_menu">
    <!-- Hide these from the nav, however they need to be here for the js to figure out where you are -->
      <div class="menu_item hidden" onClick="location.href='/Page/mercuryQuadMap';"         ><a href="/Page/mercuryQuadMap">          Mercury 1:5 million </a></div>
      <div class="menu_item hidden" onClick="location.href='/Page/venus1to5m_Radar';"       ><a href="/Page/venus1to5m_Radar">        Venus 1:5 million   </a></div>
      <div class="menu_item hidden" onClick="location.href='/Page/venus1to10m_Altimetry';"  ><a href="/Page/venus1to10m_Altimetry">   Venus 1:10 million  </a></div>
      <div class="menu_item hidden" onClick="location.href='/Page/moon1to1mShadedRelief';"  ><a href="/Page/moon1to1mShadedRelief">   Moon 1:1 million    </a></div>
      <div class="menu_item hidden" onClick="location.href='/Page/moon1to10mShadedRelief';" ><a href="/Page/moon1to10mShadedRelief">  Moon 1:10 million   </a></div>
      <div class="menu_item hidden" onClick="location.href='/Page/mars1to5mMOLA';"          ><a href="/Page/mars1to5mMOLA">           Mars 1:5 million    </a></div>
    </div>
  </div>
</div>

<div id="mars_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#mars_menu'); animateRight('#nomenclature_menu');"> Previous</div> 
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Mars</div>
      <div class="sub_menu">
        <div class="menu_item" onClick="location.href='/Page/MARS/system';"   ><a href="/Page/MARS/system">   Martian System  </a></div>
        <div class="menu_item" onClick="location.href='/Page/MARS/target';"   ><a href="/Page/MARS/target">   Mars            </a></div>
        <div class="menu_item" onClick="location.href='/Page/PHOBOS/target';" ><a href="/Page/PHOBOS/target"> Phobos          </a></div>
        <div class="menu_item" onClick="location.href='/Page/DEIMOS/target';" ><a href="/Page/DEIMOS/target"> Deimos          </a></div>
      </div>
    </div>
  </div>
</div>

<div id="asteroids_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#asteroids_menu'); animateRight('#nomenclature_menu');"> Previous</div> 
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Asteroids</div>
      <div class="sub_menu">
        <div class="menu_item" onClick="location.href='/Page/CERES/target';"    ><a href="/Page/CERES/target">Ceres  </a></div>
        <div class="menu_item" onClick="location.href='/Page/DACTYL/target';"   ><a href="/Page/DACTYL/target">Dactyl  </a></div>
        <div class="menu_item" onClick="location.href='/Page/EROS/target';"     ><a href="/Page/EROS/target">Eros    </a></div>
        <div class="menu_item" onClick="location.href='/Page/GASPRA/target';"   ><a href="/Page/GASPRA/target">Gaspra  </a></div>
        <div class="menu_item" onClick="location.href='/Page/IDA/target';"      ><a href="/Page/IDA/target">Ida     </a></div>
        <div class="menu_item" onClick="location.href='/Page/ITOKAWA/target';"  ><a href="/Page/ITOKAWA/target">Itokawa </a></div>
        <div class="menu_item" onClick="location.href='/Page/LUTETIA/target';"  ><a href="/Page/LUTETIA/target">Lutetia</a></div>
        <div class="menu_item" onClick="location.href='/Page/MATHILDE/target';" ><a href="/Page/MATHILDE/target">Mathilde</a></div>
        <div class="menu_item" onClick="location.href='/Page/RYUGU/target';"    ><a href="/Page/RYUGU/target">Ryugu</a></div>
        <div class="menu_item" onClick="location.href='/Page/STEINS/target';"   ><a href="/Page/STEINS/target">Steins</a></div>
        <div class="menu_item" onClick="location.href='/Page/VESTA/target';"    ><a href="/Page/VESTA/target">Vesta</a></div>
        <div class="menu_item hidden" onClick="location.href='/Page/ASTEROIDS/system';" ><a href="/Page/ASTEROIDS/system">More..  </a></div>
      </div>
    </div>
  </div>
</div>

<div id="jupiter_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#jupiter_menu'); animateRight('#nomenclature_menu');"> Previous</div>
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Jupiter</div>
      <div class="sub_menu">
        <div class="menu_item hidden" onClick="location.href='/Page/JUPITER/system';"><a href="/Page/JUPITER/system">Jovian System</a></div>
        <div class="menu_item" onClick="location.href='/Page/Rings#jupiter';"        ><a href="/Page/Rings#jupiter">Jupiter Rings</a></div>
        <div class="menu_item" onClick="location.href='/Page/AMALTHEA/target';"      ><a href="/Page/AMALTHEA/target">Amalthea     </a></div>
        <div class="menu_item" onClick="location.href='/Page/THEBE/target';"         ><a href="/Page/THEBE/target">Thebe        </a></div>
        <div class="menu_item" onClick="location.href='/Page/IO/target';"            ><a href="/Page/IO/target">Io           </a></div>
        <div class="menu_item" onClick="location.href='/Page/EUROPA/target';"        ><a href="/Page/EUROPA/target">Europa       </a></div>
        <div class="menu_item" onClick="location.href='/Page/GANYMEDE/target';"      ><a href="/Page/GANYMEDE/target">Ganymede     </a></div>
        <div class="menu_item" onClick="location.href='/Page/CALLISTO/target';"      ><a href="/Page/CALLISTO/target">Callisto     </a></div>
      </div>                                                                                    
    </div>
  </div>
</div>

<div id="saturn_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#saturn_menu'); animateRight('#nomenclature_menu');"> Previous</div>
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Saturn</div>
      <div class="sub_menu">
        <div class="menu_item hidden" onClick="location.href='/Page/SATURN/system';"      ><a href="/Page/SATURN/system"     >Saturnian System</a></div>
        <div class="menu_item" onClick="location.href='/Page/Rings#saturn';"       ><a href="/Page/Rings#saturn"      >Saturn Rings    </a></div>
        <div class="menu_item" onClick="location.href='/Page/EPIMETHEUS/target';"  ><a href="/Page/EPIMETHEUS/target" >Epimetheus      </a></div>
        <div class="menu_item" onClick="location.href='/Page/JANUS/target';"       ><a href="/Page/JANUS/target"      >Janus           </a></div>
        <div class="menu_item" onClick="location.href='/Page/MIMAS/target';"       ><a href="/Page/MIMAS/target"      >Mimas           </a></div>
        <div class="menu_item" onClick="location.href='/Page/ENCELADUS/target';"   ><a href="/Page/ENCELADUS/target"  >Enceladus       </a></div>
        <div class="menu_item" onClick="location.href='/Page/TETHYS/target';"      ><a href="/Page/TETHYS/target"     >Tethys          </a></div>
        <div class="menu_item" onClick="location.href='/Page/DIONE/target';"       ><a href="/Page/DIONE/target"      >Dione           </a></div>
        <div class="menu_item" onClick="location.href='/Page/RHEA/target';"        ><a href="/Page/RHEA/target"       >Rhea            </a></div>
        <div class="menu_item" onClick="location.href='/Page/TITAN/target';"       ><a href="/Page/TITAN/target"      >Titan           </a></div>
        <div class="menu_item" onClick="location.href='/Page/HYPERION/target';"    ><a href="/Page/HYPERION/target"   >Hyperion        </a></div>
        <div class="menu_item" onClick="location.href='/Page/IAPETUS/target';"     ><a href="/Page/IAPETUS/target"    >Iapetus         </a></div>
        <div class="menu_item" onClick="location.href='/Page/PHOEBE/target';"      ><a href="/Page/PHOEBE/target"     >Phoebe          </a></div>
        <!-- <div class="menu_item" onClick="location.href='${contextPath}/Page/SATURN/target#more';" ><a href="/Page/SATURN/target#more">more..          </a></div> -->
      </div>                                                                                    
    </div>
  </div>
</div>                         

<div id="uranus_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#uranus_menu'); animateRight('#nomenclature_menu');"> Previous</div>
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Uranus</div>
      <div class="sub_menu">
        <div class="menu_item hidden" onClick="location.href='/Page/URANUS/system';"><a href="/Page/URANUS/system">   Uranian System  </a></div>
        <div class="menu_item" onClick="location.href='/Page/Rings#uranus';"        ><a href="/Page/Rings#uranus">    Uranus Rings    </a></div>
        <div class="menu_item" onClick="location.href='/Page/PUCK/target';"         ><a href="/Page/PUCK/target">     Puck            </a></div>
        <div class="menu_item" onClick="location.href='/Page/MIRANDA/target';"      ><a href="/Page/MIRANDA/target">  Miranda         </a></div>
        <div class="menu_item" onClick="location.href='/Page/ARIEL/target';"        ><a href="/Page/ARIEL/target">    Ariel           </a></div>
        <div class="menu_item" onClick="location.href='/Page/UMBRIEL/target';"      ><a href="/Page/UMBRIEL/target">  Umbriel         </a></div>
        <div class="menu_item" onClick="location.href='/Page/TITANIA/target';"      ><a href="/Page/TITANIA/target">  Titania         </a></div>
        <div class="menu_item" onClick="location.href='/Page/OBERON/target';"       ><a href="/Page/OBERON/target">   Oberon          </a></div>
      </div>
    </div>
  </div>
</div>

<div id="neptune_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#neptune_menu'); animateRight('#nomenclature_menu');">Previous</div>
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Neptune</div>
      <div class="sub_menu">
        <div class="menu_item hidden" onClick="location.href='/Page/NEPTUNE/system';" ><a href="/Page/NEPTUNE/system">  Neptunian System  </a></div>
        <div class="menu_item" onClick="location.href='/Page/Rings#neptune';"         ><a href="/Page/Rings#neptune" >  Neptune Rings     </a></div>
        <div class="menu_item" onClick="location.href='/Page/PROTEUS/target';"        ><a href="/Page/PROTEUS/target">  Proteus           </a></div>
        <div class="menu_item" onClick="location.href='/Page/TRITON/target';"         ><a href="/Page/TRITON/target" >  Triton            </a></div>
      </div>
    </div>
  </div>
</div>

<div id="dwarf_menu" class="menu">
  <div class="home_menu" onClick="location.href='/';"><a href="/">Home</a></div>
  <div class="previous_menu" onClick="animateRight('#dwarf_menu'); animateRight('#nomenclature_menu');">Previous</div>
  <div class="sub_menu">
    <div class="sub_menu">
      <div class="parent_menu">Dwarf Planets</div>
      <div class="sub_menu">
        <div class="menu_item" onClick="location.href='/Page/PLUTO/system';" ><a href="/Page/PLUTO/system">Plutonian System</a></div>
        <div class="menu_item" onClick="location.href='/Page/PLUTO/target';" ><a href="/Page/PLUTO/target">Pluto</a></div>
        <div class="menu_item" onClick="location.href='/Page/CHARON/target';"><a href="/Page/CHARON/target">&nbsp;&nbsp;&nbsp;Charon</a></div>
        <div class="menu_item" onClick="location.href='/Page/CERES/target';" ><a href="/Page/CERES/target">Ceres</a></div>
      </div>
    </div>
  </div>
</div>

<script>
  function disableMenu() {
    $('#menu_mask').css({'z-index':'1'});
    
    window.setTimeout(function() {
      $('#menu_mask').css({'z-index':'0'});
    }, 450); // 450 is in ms, and is hair longer than the sliding animation takes.
  }


  function animateRight(current_item) {
    disableMenu();
    var $marginLefty = $(current_item);
    $marginLefty.animate({
      marginLeft: parseInt($marginLefty.css('marginLeft'), 10) == 0 ?
        $marginLefty.outerWidth() :
        0
    }); 
  } 

  function animateLeft(current_item) {
    disableMenu();
    var $marginLefty = $(current_item);
    $marginLefty.animate({
      marginLeft: parseInt($marginLefty.css('marginLeft'), 10) == 0 ?
        -$marginLefty.outerWidth() :
        0
    }); 
  } 
 
  $(document).ready(function() {
    // if a 404      
    if($('title').html() == "Planetary Names: 404 Page not found") {
      $('#main_menu').css('marginLeft', 0); 
      return;
    }
            
    // if a feature page
    if(typeof(featureSystem) === "string" && featureSystem != "") {
      // if the feature's system does not have a page
      if(featureSystem == "EARTH" || featureSystem == "VENUS" || featureSystem == "MERCURY") {
        // show the nomenclature menu
        $('#nomenclature_menu').css('marginLeft', 0); 
        $('#main_menu').css('marginLeft', -190);
        
        // highlight the current page 
        if( featureSystem == "EARTH" ) {
          $("div.menu_item[onClick*='/Page/MOON/target']").attr('id', 'current_location');
        } else if(featureSystem == "VENUS") {
          $("div.menu_item[onClick*='/Page/VENUS/target']").attr('id', 'current_location');
        } else {
          $("div.menu_item[onClick*='/Page/MERCURY/target']").attr('id', 'current_location');
        }              
      } else {                
        // otherwise the feature's system page exists, show the matching /Page/*/system menu item
        var system_menu_item =  $("div.menu_item[onClick*='/Page/" + featureSystem + "/system']");
        
        if(system_menu_item.length != 0) {               
          var parent_menu = system_menu_item.parent();
          while(parent_menu.attr('class') != "menu" ) { // Loop back up the dom, looking for this menu item's parent menu
            parent_menu = parent_menu.parent();
          }
          parent_menu.css('marginLeft', 0); // show the correct menu
          
          // use featureTarget variable (set by the feature page) to highlight the correct page in the menu
          $("div.menu_item[onClick*='/Page/" + featureTarget + "/target']").attr('id', 'current_location');                
          $('#nomenclature_menu').css('marginLeft', -190); // setup the two sub menus
          $('#main_menu').css('marginLeft', -190);
        } else {
          // you're lost.. go back to the main menu
          $('#main_menu').css('marginLeft', 0);
        }
      }
    }
              
    // a system?   /Page/*/system -> show the system's
    // a target?  /Page/*/target  -> show the menu that contians the target link
    // a page?   /Page/*          -> find the page and show its menu, else main menu
    else if(location.pathname.match("/Page/*./target") != null || location.pathname.match("/Page/.*/system") != null || location.pathname.match("/Page/") != null) {            
      var sub_page_location = location.pathname.substring(location.pathname.lastIndexOf("/Page/")+6); // 6 is the length of /Page/
      var target_name   = sub_page_location.substring(0, sub_page_location.lastIndexOf("/target")).toLowerCase();
                
      // This works for now, because Targets are the only things that are 3 levels deep.
      if(target_name.length != 0 || location.pathname.match("/Page/.*/system") != null) {
        $('#nomenclature_menu').css('marginLeft', -190); 
      }
                
      var attribute_to_look_for = location.pathname.substring(location.pathname.indexOf("/Page/"));

      if(attribute_to_look_for != "") { // need to do this check to make sure your not actually on "/Page/" which isnt valid           
        var menu_item =  $("div.menu_item[onClick*='" + attribute_to_look_for + "']"); // look for menu_items that have the attribute';
      } else {
        var menu_item = Array(); // just pretend like it couldn't find a menu_item
      }

      if(menu_item.length == 0 && attribute_to_look_for.indexOf('#') != -1) {
        // lets do try the search again only this time omit the stuff after the '#'
        menu_item =  $("div.menu_item[onClick*='" + attribute_to_look_for.substring(0,attribute_to_look_for.indexOf('#')) + "']");
      }
                  
      if(menu_item.length != 0) {
        menu_item.attr('id', 'current_location'); // highlight the current location              
        var parent_menu = menu_item.parent();

        while(parent_menu.attr('class') != "menu") { // Loop back up the dom, looking for this menu item's parent menu
          parent_menu = parent_menu.parent();
        }

        if(parent_menu.attr('id') != "nomenclature_menu") { // this wont work for 3 levels deep in areas other than the nomenclature area
          attribute_to_look_for = parent_menu.attr('id');
          var the_parents_parent_menu = $("div.menu_item[onClick*='" + attribute_to_look_for + "']");

          // from this link we need its parent menu
          while(the_parents_parent_menu.attr('class') != "menu") { // Loop back up the dom, looking for this menu item's parent menu (which is the parents parent)
            the_parents_parent_menu = the_parents_parent_menu.parent();
          }

          if(the_parents_parent_menu != null) {
            the_parents_parent_menu.css('marginLeft', -190);
          }                  
        } // else were on the nomenclature_menu
        
        if(parent_menu.length > 1) {
          parent_menu = $(parent_menu[0])
        }
        
        parent_menu.css('marginLeft', 0);
        
        // now we need to find the parents parent menu and set its left margin to -190
        // currently this only applies for items under the nomenclature menu, however in the future pages could be more than two
        // levels deep, so we need to consider a better way to find parent menus generically.
                      
        $('#main_menu').css('marginLeft', -190);          
      } else if(location.pathname.match("/Page/") != null) { // theres no page menu so show the default main menu
        $('#main_menu').css("marginLeft", 0); 
      }            
    } else if(location.href === "/" ) { // home page
        $('#main_menu').css("marginLeft", 0); 
        $('#main_menu > div').first().attr('id', 'current_location'); // highlight the home page location                            
    } else { // other? /FeatureNameRequest  or /AdvancedSearch or /SearchResults or etc
        var menu_item =  $("div.menu_item[onClick*='" + location.pathname.substring(1) + "']").first(); // only get the first one, its possible we'll also get a match in the admin area
        
        if(menu_item == null || menu_item.length == 0) { // the selector could return an empty array
          // can't find it, so just display the main menu
          $('#main_menu').css("marginLeft", 0);               
        } else {
          menu_item.attr('id', 'current_location'); // highlight the current location
          var parent_menu = menu_item.parent();
          var counter = 3; // max levels to loop

          // traverse back up dom looking for parent menu
          while(parent_menu.attr('class') != "menu" && counter > 0) {
            parent_menu = parent_menu.parent();
            --counter;
          }

          parent_menu.css('marginLeft', 0);

          // if parent menu exists, must be main menu
          if($('#main_menu').css("marginLeft") != "0px") {
            $('#main_menu').css("marginLeft", -190);
          }

          // all else, revert to main menu
          if(parent_menu == null) {
            // console.log("default case");
            $('#main_menu').css("marginLeft", 0);
          }
        }
    } 
        
    $('#simple_search_box').focus(function() {
      $('#simple_search_box').removeClass('search_box_empty');
    }); 

    $('#simple_search_box').blur(function() {
      var search_box = $('#simple_search_box');
      if(search_box.val() == '') {
        $('#simple_search_box').addClass('search_box_empty');
      }
    });
  });
</script>

